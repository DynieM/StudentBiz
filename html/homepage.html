<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Homepage</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../css/style.css">
    <style></style>
  </head>

  <body>
    <header>
      <!-- Navigation Bar -->
      <nav class="navbar">
        <div class="logo">
          <a href="#"><img src="../assets/Logo/studentbizlogo_medium.png" alt="Home">StudentBiz</a>
        </div>
        <!-- Right side of the navigation bar on the Home Page-->
        <div class="rightnav">
          <a href="#"><img src="../assets/Icons/profilepic.png" alt="Profile Icon">Profile</a>
          <a href="#"><img src="../assets/Icons/inbox.png" alt="Inbox Icon"> Inbox</a>
        </div>
      </nav>
    </header>

      <!--Advertisement Container -->
  <div class="adcontainer">
  <!-- Left Arrow-->
    <img src="../assets/Icons/leftslide.png" alt="Left Arrow" class="arrow left-arrow">
    <div class="advertise">
      <p>Space for AD</p>
    </div>
   <!-- Right Arrow-->
    <img src="../assets/Icons/rightslide.png" alt="Right Arrow" class="arrow right-arrow">
  </div>

    <h1>What are you looking for?</h1>
    <!--Search Bar-->
    <div class="search-bar">
      <input type="text" placeholder="Search..." id="search-input">
      <button id="search-btn">Search</button>
    </div>
    <script>window.onload = function() {
      const { createClient } = supabase;
      const supabaseUrl = 'https://sozsdklrdymnlkaillqs.supabase.co';
      const supabaseKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNvenNka2xyZHltbmxrYWlsbHFzIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTcwOTE1NjQ5NSwiZXhwIjoyMDI0NzMyNDk1fQ.YVxLLcVZo_k0adoaEqRoR8kK6FLbQxjYvU6SChX55Z4";
      const supaClient = createClient(supabaseUrl, supabaseKey);
      
      document.getElementById('search-btn').addEventListener('click', async () => {
          const searchText = document.getElementById('search-input').value;
          if (searchText) {
              // Convert searchText to an integer
              const searchId = parseInt(searchText, 10);
      
              // Check if the conversion was successful (searchId is not NaN)
              if (!isNaN(searchId)) {
                  const { data, error } = await supabase
                      .from('business_profiles')
                      .select('*')
                      .eq('id', searchId) // Use .eq to match the exact id
                      .single(); // Assuming you want a single result because ID is unique
      
                  if (error) {
                      console.error('error', error);
                  } else {
                      displayResults([data]); // Wrap data in an array to reuse the displayResults function
                  }
              } else {
                  console.error('Invalid ID input');
              }
          }
      });
      
      function displayResults(results) {
          const resultsContainer = document.getElementById('search-results');
          resultsContainer.innerHTML = '';
          // Check if results array is not empty
          if (results.length > 0 && results[0] !== null) {
              results.forEach(business => {
                  const li = document.createElement('li');
                  li.textContent = `${business.id} - ${business.name} - ${business.description}`;
                  resultsContainer.appendChild(li);
              });
          } else {
              resultsContainer.innerHTML = '<li>No business found with that ID.</li>';
          }
      }
      
  
      function displayResults(results) {
          const resultsContainer = document.getElementById('search-results');
          resultsContainer.innerHTML = '';
          results.forEach(business => {
              const li = document.createElement('li');
              li.textContent = `${business.name} - ${business.description}`;
              resultsContainer.appendChild(li);
          });
      }
  };
  </script>

   <!-- Categories Section -->
<div class="categories">
  <h2>Categories</h2>
  <div class="category-grid">
    <div class="category-item">
    <!--Edit Link-->
      <a href="../html/submittedSearch.html">
      <img src="../assets/Icons/beauty.png" alt="Beauty Icon"><p>Beauty</p>
      </a>
    </div>
    <div class="category-item">
     <!--Edit Link-->
      <a href="category2.html">
        <img src="../assets/Icons/food.png" alt="Food Icon"><p>Food</p>
      </a>
    </div>
    <div class="category-item">
      <img src="../assets/Icons/tutor.png" alt="Education/Tutor Icon"><p>Education/Tutor</p>
    </div>
    <div class="category-item">
      <img src="../assets/Icons/shopping.png" alt="Shopping Icon"><p>Shopping</p>
    </div>
    <div class="category-item">
      <img src="../assets/Icons/art.png" alt="Arts & Crafts Icon">
      <p>Arts &amp; Crafts</p>
    </div>
    <div class="category-item">
      <img src="../assets/Icons/pets.png" alt="Pets Icon">
      <p>Pets</p>
    </div>
  </div>
</div>

<!--Footer -->
    <footer>
        <h3><a href="about.html">About</a></h3>
      <ul class="footer">
        <li><a href="about.html">Guidelines &amp; Disclaimers</a></li>
        <li><a href="about.html">About Us</a></li>
        <li><a href="about.html">Guidelines &amp; Disclaimers</a></li>
        <li><a href="about.html">Accessibility Statement </a></li>
        <li><a href="about.html">Contact Us</a></li>
      </ul>
    </footer>
  </body>
</html>